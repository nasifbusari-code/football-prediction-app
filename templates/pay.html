{% extends "base.html" %}
{% block content %}
    <h1>Become a VIP</h1>
    <p>Unlock VIP predictions for 7 days!</p>
    <form id="paymentForm">
        <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" class="form-control" id="email-address" required />
        </div>
        <div class="form-group">
            <label for="amount">Amount (NGN)</label>
            <input type="number" class="form-control" id="amount" value="1000" readonly />
        </div>
        <button type="submit" class="btn btn-primary" onclick="payWithPaystack()">Pay Now</button>
    </form>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script>
        function payWithPaystack() {
            event.preventDefault();
            let handler = PaystackPop.setup({
                key: '{{ paystack_key }}',
                email: document.getElementById('email-address').value,
                amount: document.getElementById('amount').value * 100,
                currency: 'NGN',
                callback: function(response) {
                    window.location.href = '/paystack/callback?reference=' + response.reference;
                },
                onClose: function() {
                    alert('Payment cancelled.');
                }
            });
            handler.openIframe();
        }
    </script>
{% endblock %}
